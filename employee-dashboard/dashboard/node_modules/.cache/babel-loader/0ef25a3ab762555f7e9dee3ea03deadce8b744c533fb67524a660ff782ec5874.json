{"ast":null,"code":"var _jsxFileName = \"/Users/arijitroy/kafka/Codes/employee-dashboard/dashboard/src/components/Location.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport L from 'leaflet';\nimport axios from 'axios';\nimport 'leaflet/dist/leaflet.css';\nimport './Location.css';\n\n// Default position for Bengaluru\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultPosition = [12.9716, 77.5946]; // Latitude and Longitude for Bengaluru\n\nconst Location = () => {\n  _s();\n  const [markers, setMarkers] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const fetchData = async () => {\n    try {\n      const response = await axios.get('http://localhost:5001/data');\n      const csvData = response.data;\n      const locationCounts = {};\n      csvData.forEach(item => {\n        if (item.status === 'Approved') {\n          const location = item.location;\n          locationCounts[location] = (locationCounts[location] || 0) + 1;\n        }\n      });\n      const markerData = await geocodeLocations(Object.keys(locationCounts));\n      setMarkers(markerData);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n  const geocodeLocations = async locations => {\n    const markerData = [];\n    for (const location of locations) {\n      try {\n        const response = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(location)}`);\n        if (response.data.length > 0) {\n          const {\n            lat,\n            lon\n          } = response.data[0];\n          markerData.push({\n            position: [lat, lon],\n            count: locationCounts[location],\n            name: location\n          });\n        }\n      } catch (error) {\n        console.error(`Error geocoding ${location}:`, error);\n      }\n    }\n    return markerData;\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (searchTerm) {\n      try {\n        const response = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(searchTerm)}`);\n        if (response.data.length > 0) {\n          const {\n            lat,\n            lon\n          } = response.data[0];\n          setMarkers([{\n            position: [lat, lon],\n            count: 0,\n            name: searchTerm\n          }]);\n        }\n      } catch (error) {\n        console.error('Error searching location:', error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSearch,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search location\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: defaultPosition,\n      zoom: 13,\n      style: {\n        height: \"100vh\",\n        width: \"88%\",\n        position: \"absolute\",\n        left: \"13.5%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), markers.map((marker, index) => /*#__PURE__*/_jsxDEV(Marker, {\n        position: marker.position,\n        icon: new L.Icon.Default(),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: [marker.name, \": \", marker.count, \" leaves\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n_s(Location, \"1rTdBMFFH0oyZ2YMjOgSWoJJEHQ=\");\n_c = Location;\nexport default Location;\nvar _c;\n$RefreshReg$(_c, \"Location\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Popup","L","axios","jsxDEV","_jsxDEV","defaultPosition","Location","_s","markers","setMarkers","searchTerm","setSearchTerm","fetchData","response","get","csvData","data","locationCounts","forEach","item","status","location","markerData","geocodeLocations","Object","keys","error","console","locations","encodeURIComponent","length","lat","lon","push","position","count","name","handleSearch","e","preventDefault","children","onSubmit","type","placeholder","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","center","zoom","style","height","width","left","url","attribution","map","marker","index","icon","Icon","Default","_c","$RefreshReg$"],"sources":["/Users/arijitroy/kafka/Codes/employee-dashboard/dashboard/src/components/Location.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport L from 'leaflet';\nimport axios from 'axios';\nimport 'leaflet/dist/leaflet.css';\nimport './Location.css';\n\n// Default position for Bengaluru\nconst defaultPosition = [12.9716, 77.5946]; // Latitude and Longitude for Bengaluru\n\nconst Location = () => {\n    const [markers, setMarkers] = useState([]);\n    const [searchTerm, setSearchTerm] = useState('');\n\n    const fetchData = async () => {\n        try {\n            const response = await axios.get('http://localhost:5001/data');\n            const csvData = response.data;\n            const locationCounts = {};\n\n            csvData.forEach(item => {\n                if (item.status === 'Approved') {\n                    const location = item.location;\n                    locationCounts[location] = (locationCounts[location] || 0) + 1;\n                }\n            });\n\n            const markerData = await geocodeLocations(Object.keys(locationCounts));\n            setMarkers(markerData);\n        } catch (error) {\n            console.error('Error fetching data:', error);\n        }\n    };\n\n    const geocodeLocations = async (locations) => {\n        const markerData = [];\n        for (const location of locations) {\n            try {\n                const response = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(location)}`);\n                if (response.data.length > 0) {\n                    const { lat, lon } = response.data[0];\n                    markerData.push({ position: [lat, lon], count: locationCounts[location], name: location });\n                }\n            } catch (error) {\n                console.error(`Error geocoding ${location}:`, error);\n            }\n        }\n        return markerData;\n    };\n\n    useEffect(() => {\n        fetchData();\n    }, []);\n\n    const handleSearch = async (e) => {\n        e.preventDefault();\n        if (searchTerm) {\n            try {\n                const response = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(searchTerm)}`);\n                if (response.data.length > 0) {\n                    const { lat, lon } = response.data[0];\n                    setMarkers([{ position: [lat, lon], count: 0, name: searchTerm }]);\n                }\n            } catch (error) {\n                console.error('Error searching location:', error);\n            }\n        }\n    };\n\n    return (\n        <div>\n            <form onSubmit={handleSearch}>\n                <input\n                    type=\"text\"\n                    placeholder=\"Search location\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                />\n                <button type=\"submit\">Search</button>\n            </form>\n\n            <MapContainer center={defaultPosition} zoom={13} style={{ height: \"100vh\", width: \"88%\", position: \"absolute\", left: \"13.5%\" }}>\n                <TileLayer\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                    attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                />\n                {markers.map((marker, index) => (\n                    <Marker key={index} position={marker.position} icon={new L.Icon.Default()}>\n                        <Popup>\n                            {marker.name}: {marker.count} leaves\n                        </Popup>\n                    </Marker>\n                ))}\n            </MapContainer>\n        </div>\n    );\n};\n\nexport default Location;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}